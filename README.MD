## watermark.js

watermark æ˜¯ä¸€ä¸ªåŸºäº canvas çš„ç®€å•çš„ç”Ÿæˆè‡ªå®šä¹‰æ°´å°çš„æ’ä»¶ï¼Œè½»é‡ã€çµæ´»ã€é…ç½®ç®€å•æ˜¯å®ƒçš„ç‰¹ç‚¹ã€‚

GitHub: [ä¼ é€é—¨](https://github.com/Jimmylxue/easy-watermark)

> issues æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ›ï¼ğŸ˜„

çŸ¥è¯†æ˜Ÿçƒï¼š[ä¼ é€é—¨](http://www.jimmyxuexue.top)

> å¤§å…„å¼Ÿä»¬èšè¿‡æ¥ï¼Œè¿™ä»¶äº‹å¾ˆé‡è¦ğŸ‰ğŸ‰ğŸ‰

## æ•ˆæœ

**marker æ°´å°æ•ˆæœ**

![image-20220604104010832](https://vitepress-source.oss-cn-beijing.aliyuncs.com/typoraimage-20220604104010832.png)

![demo](http://jimmyxx.oss-cn-beijing.aliyuncs.com/demo.png)

![demo](http://jimmyxx.oss-cn-beijing.aliyuncs.com/demo2.png)

**mosaic é©¬èµ›å…‹æ•ˆæœ**

![image-20220701233625989](https://vitepress-source.oss-cn-beijing.aliyuncs.com/typoraimage-20220701233625989.png)

**blur é«˜æ–¯æ¨¡ç³Š**

![image-20220917173326254](https://vitepress-source.oss-cn-beijing.aliyuncs.com/typoraimage-20220917173326254.png)

## å¿«é€Ÿå¼€å§‹

#### å®‰è£…ä¸‹è½½

```
npm i esay-watermark

yarn add esay-watermark (æ¨è)
```

#### åŸºæœ¬ä½¿ç”¨

- åœ¨æ¡†æ¶ä¸­ä½¿ç”¨

  > Vueçš„demoï¼Œreactå’Œå…¶ä»–æ¡†æ¶åŒç†

  ```vue
  <template>
  	<img alt="Vue logo" :src="imgurl" />
    <img alt="Vue logo" :src="imgur2" />
    <img alt="Vue logo" :src="imgur3" />
  </template>
  
  <script setup>
  import { ref } from 'vue'
  import { marker, mosaic, blur } from 'esay-watermark'
  
  const imgUrl = ref('')
  const imgUrl2 = ref('')
  const imgUrl3 = ref('')
  
  // æ°´å°æ•ˆæœ
  marker({
  	src: 'https://img1.baidu.com/it/u=128307009,2094083535&fm=26&fmt=auto',
  	text: 'jimmy',
  	color: '#bdc3c7',
  	size: 120,
  	position: 'center',
  	padding: 10,
  }).then(res => (imgurl.value = res))
  
  // é©¬èµ›å…‹æ•ˆæœ
  mosaic({
  	src: 'https://avatars.githubusercontent.com/u/65758455?v=4',
  	size: 5,
  }).then(source => {
  	imgur2.src = source
  })
    
  // é«˜æ–¯æ¨¡ç³Šæ•ˆæœ
  blur({
  	src: 'https://avatars.githubusercontent.com/u/65758455?v=4',
  	radius: 5,
  }).then(source => {
  	imgur2.src = source
  })
  </script>
  ```

- åœ¨ html ä¸­ä½¿ç”¨

  ```html
  <body>
  	<script src="./watermark.min.js"></script>
  	<img id="img" alt="æ°´å°æ•ˆæœ" />
		<img id="img2" alt="é©¬èµ›å…‹æ•ˆæœ" />
    <img id="img3" alt="é«˜æ–¯æ¨¡ç³Šæ•ˆæœ" />
		<script>
			const { marker, mosaic, blur } = waterMarker // watermark é»˜è®¤å¯¼å‡ºå¯¹è±¡
  		const img = document.getElementById('img')
			const img2 = document.getElementById('img2')
      const img3 = document.getElementById('img3')
      
			// åˆ¶ä½œæ°´å°
			const config = {
				src: 'http://jimmyxx.oss-cn-beijing.aliyuncs.com/lot.png',
				text: 'easy-watermark',
				color: '#bdc3c7',
				size: 40,
				position: 'center',
  			padding: 10,
  			rotate: -15,
  			type: 'stroke',
  		}
  		marker(config).then(res => {
				img2.src = res
			})
	
			// åˆ¶ä½œé©¬èµ›å…‹æ•ˆæœ
			mosaic({
				src: 'https://avatars.githubusercontent.com/u/65758455?v=4',
				size: 5,
  		}).then(source => {
  			img.src = source
  		})
      
      // é«˜æ–¯æ¨¡ç³Šæ•ˆæœ
      blur({
        src: 'https://avatars.githubusercontent.com/u/65758455?v=4',
        radius: 5,
      }).then(source => {
        imgur2.src = source
      })
  	</script>
  </body>
  ```

## API

**marker API**

| å±æ€§å   | ç±»å‹   | æ˜¯å¦å¿…å¡«   | æè¿°                          |
| -------- | ------ | ------ | --------------------------------------------- |
| src      | string | yes | å›¾ç‰‡åœ°å€ï¼ˆå¿…å¡«ï¼‰                              |
| text     | string | yes | æ°´å°æ–‡å­—                                      |
| color    | string | yes | æ°´å°é¢œè‰²                                      |
| size     | number | yes | æ°´å°æ–‡å­—å¤§å°ï¼Œé»˜è®¤ 20                         |
| padding  | number | yes | æ°´å°è·ç¦»å›¾ç‰‡è¾¹ç¼˜çš„è·ç¦»ï¼Œé»˜è®¤ 30               |
| output   | 'jpeg' \| 'png' | yes | è¾“å‡ºå›¾ç‰‡ç±»å‹ æ”¯æŒ `jpeg`å’Œ`png` ï¼Œé»˜è®¤ `jpeg` |
| position | Position | yes | æ°´å°æ‰€å¤„ä½ç½®ï¼Œé»˜è®¤ right-bottomï¼ˆå³ä¸‹ï¼‰       |
| type | 'fill'\|'stroke' | no | æ–‡å­—çš„â€œå¡«å……æ¨¡å¼â€å’Œâ€œæè¾¹æ¨¡å¼â€ï¼ˆé»˜è®¤å¡«å……æ¨¡å¼ï¼‰ |
| rotate | number | no | æ—‹è½¬è§’åº¦       |

å…¶ä¸­Positionå±æ€§å…·æœ‰ä»¥ä¸‹å±æ€§å€¼ï¼š

| Position å±æ€§å€¼ | æ•ˆæœ |
| --------------- | ---- |
| left-top        | å·¦ä¸Š |
| left-center     | å·¦ä¸­ |
| left-bottom     | åä¸‹ |
| center-top      | ä¸­ä¸Š |
| center          | æ­£ä¸­ |
| center-bottom   | ä¸­ä¸‹ |
| right-top       | å³ä¸Š |
| right-center    | å³ä¸­ |
| right-bottom    | å³ä¸‹ |

**mosaic API**

| å±æ€§å   | ç±»å‹   | æ˜¯å¦å¿…å¡«   | æè¿°                          |
| -------- | ------ | ------ | --------------------------------------------- |
| src      | string | yes | å›¾ç‰‡åœ°å€ï¼ˆå¿…å¡«ï¼‰                              |
| size | number \| string | no | æ¨¡ç³ŠåŠ›åº¦ï¼Œè¶Šå¤§è¶Šæ¨¡ç³Šï¼ˆé»˜è®¤10ï¼‰ |
| output | 'jpeg' \| 'png' | no | å¯¼å‡ºå›¾ç‰‡ç±»å‹ï¼ˆé»˜è®¤jpegï¼‰                |

**blur API**

| å±æ€§å   | ç±»å‹   | æ˜¯å¦å¿…å¡«   | æè¿°                          |
| -------- | ------ | ------ | --------------------------------------------- |
| src      | string | yes | å›¾ç‰‡åœ°å€ï¼ˆå¿…å¡«ï¼‰                              |
| blur | number \| string | no | æ¨¡ç³ŠåŠå¾„ï¼Œè¶Šå¤§è¶Šæ¨¡ç³Šï¼ˆé»˜è®¤5ï¼‰ |
| output | 'jpeg' \| 'png' | no | å¯¼å‡ºå›¾ç‰‡ç±»å‹ï¼ˆé»˜è®¤jpegï¼‰                |

## æ›´æ–°æ—¥å¿—

- [x] æ–°å¢ rotate æ—‹è½¬è§’åº¦

  > 2022.06.02 æ›´æ–°
  
- [x] æ–°å¢ type æ–‡å­—ä¹¦å†™æ–¹å¼ â€œæè¾¹â€|â€œå¡«å……â€

  > 2022.07.01 æ›´æ–°
  
- [x] æ–°å¢ `mosaic ` å›¾ç‰‡è½¬é©¬èµ›å…‹

  > 2022.07.02 æ›´æ–°
  
- [x] æ–°å¢ `blur` é«˜æ–¯æ¨¡ç³Š

  > 2022.09.17 æ›´æ–°

## æ•¬è¯·æœŸå¾…

æ—¥åè¿™ä¸ªåº“ä¼šä¸å®šæœŸæ›´æ–°ğŸ˜....

æœŸå¾…å°ä¼™ä¼´ä»¬çš„starå’ŒPRğŸ¤ğŸ¤ğŸ¤
